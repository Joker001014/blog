{"componentChunkName":"component---src-templates-blog-post-js","path":"/020_HIT_OS_Register/","result":{"data":{"site":{"siteMetadata":{"title":"JokerDebug"}},"markdownRemark":{"id":"17ebe75b-cc84-5780-93c4-94494f35c4fc","excerpt":"Github代码仓库链接 在学习CPU底层技术的时候，难免会接触到各式各样的寄存器。尤其是在使用汇编语言编写操作系统时，寄存器更是必不可少的。因此，这篇文章将来详细聊聊 x86_64 架构中的所有寄存器，按照从  的顺序来进行介绍。 首先，什么是寄存器？ 寄存器是CPU…","html":"<p><a href=\"https://github.com/Joker001014/HIT-OSlab\">Github代码仓库链接</a></p>\n<p>在学习CPU底层技术的时候，难免会接触到各式各样的寄存器。尤其是在使用汇编语言编写操作系统时，寄存器更是必不可少的。因此，这篇文章将来详细聊聊 x86_64 架构中的所有寄存器，按照从 <code class=\"language-text\">常用->不常用</code> 的顺序来进行介绍。</p>\n<p>首先，<strong>什么是寄存器？</strong></p>\n<blockquote>\n<p>寄存器是CPU内部用来存放数据的一些小型存储区域，用来暂时存放参与运算的数据和运算结果以及一些CPU运行需要的信息。</p>\n</blockquote>\n<p>从操作系统使用的角度出发， 按照寄存器类型，可以分成如下几类：</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">16 _bits_：\r\n\t数据寄存器（可拆为两个独立的 8 _bits_ 寄存器）\r\n\t段寄存器\r\n\t变址寄存器\r\n\t指针寄存器\r\n32 _bits_：\r\n\t通用寄存器\r\n\t控制寄存器\r\n\t...</code></pre></div>\n<h3>一、16 <em>bits</em>（实模式）</h3>\n<p>8086 CPU 中寄存器总共为 <strong>14</strong> 个 16 <em>bits</em> 寄存器。</p>\n<ul>\n<li><strong>数据寄存器</strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">寄存器</th>\n<th align=\"center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">AX</td>\n<td align=\"center\">累加寄存器，AH:AL，可分别访问高八位、低八位。<br>通常作为临时寄存器，为段寄存器赋值；或可用于汇编乘（MUL）除（DIV）法临时寄存器。</td>\n</tr>\n<tr>\n<td align=\"center\">BX</td>\n<td align=\"center\">基地址寄存器，BH:BL，可分别访问高八位、低八位。<br>通常作为存储器指针。</td>\n</tr>\n<tr>\n<td align=\"center\">CX</td>\n<td align=\"center\">计数器寄存器，CH:CL，可分别访问高八位、低八位。<br>通常作为串操作或循环控制中的计数器。</td>\n</tr>\n<tr>\n<td align=\"center\">DX</td>\n<td align=\"center\">数据寄存器，DH:DL，可分别访问高八位、低八位。<br>与 AX 配合用于字乘/除法。</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>段寄存器</strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">寄存器</th>\n<th align=\"center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">CS</td>\n<td align=\"center\">代码段段地址寄存器<br>通常与代码段寄存器CS组合为CS:IP作为代码段地址，指向下一条要执行的指令</td>\n</tr>\n<tr>\n<td align=\"center\">DS</td>\n<td align=\"center\">数据段段地址寄存器<br>通常与变址寄存器SI组合为DS:SI，作为串操作源地址</td>\n</tr>\n<tr>\n<td align=\"center\">SS</td>\n<td align=\"center\">堆栈段段地址寄存器<br>通常与堆栈指针寄存器SP组合为SS:SP来使用</td>\n</tr>\n<tr>\n<td align=\"center\">ES</td>\n<td align=\"center\">附加段段地址寄存器<br>通常与变址寄存器DI组合为ES:DI，作为串操作目的地址</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>变址寄存器</strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">寄存器</th>\n<th align=\"center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">SI</td>\n<td align=\"center\">源地址寄存器<br>通常作为串操作中的源地址</td>\n</tr>\n<tr>\n<td align=\"center\">DI</td>\n<td align=\"center\">目的地址寄存器<br>通常作为串操作中的目的地址</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<ul>\n<li>SI 与 数据段寄存器 DS 组成 DS:SI，通常用来表示汇编指令的源地址</li>\n<li>DI 与 附加段寄存器 ES 组成 ES:DS，通常用来表示汇编指令的目的地址</li>\n</ul>\n<p>如：当调用 <code class=\"language-text\">movsb</code> 指令，就会从<code class=\"language-text\">源地址</code>复制一个字节的数据到<code class=\"language-text\">目的地址</code></p>\n</blockquote>\n<ul>\n<li><strong>指针寄存器</strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">寄存器</th>\n<th align=\"center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">SP</td>\n<td align=\"center\">堆栈指针寄存器<br>通常与堆栈段寄存器组合使用</td>\n</tr>\n<tr>\n<td align=\"center\">BP</td>\n<td align=\"center\">基址指针寄存器<br>通常存取堆栈的指针</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li><strong>控制寄存器</strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">寄存器</th>\n<th align=\"center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">IP</td>\n<td align=\"center\">指令指针寄存器<br>通常与代码段寄存器CS组合为CS:IP作为代码段地址，指向下一条要执行的指令</td>\n</tr>\n<tr>\n<td align=\"center\">FLAG</td>\n<td align=\"center\">标志寄存器，记录CPU执行过程中的一系列状态<br><strong>OF</strong>：溢出标志<br><strong>SF</strong>：符号标志<br><strong>ZF</strong>：零标志<br><strong>CF</strong>：进位标志<br><strong>AF</strong>：辅助进位标志<br><strong>DF</strong>：方向标志<br><strong>IF</strong>：中断标志<br><strong>TF</strong>：陷阱标志<br><strong>PF</strong>：奇偶标志</td>\n</tr>\n</tbody>\n</table>\n<p>举个例子：</p>\n<div class=\"gatsby-highlight\" data-language=\"asm\"><pre class=\"language-asm\"><code class=\"language-asm\">cmp AL, #0x3a\r\njl START</code></pre></div>\n<blockquote>\n<p>上述指令实现：将寄存器 AL 的值与立即数 <code class=\"language-text\">#0x3a</code> 进行比较，若 AL &#x3C; <code class=\"language-text\">#0x3a</code>，则置位零标志位 <code class=\"language-text\">ZF</code>，jl 指令再通过判断 ZF 大小，跳转到 START 处。若 AL ≥ <code class=\"language-text\">#0x3a</code>，则不跳转。</p>\n</blockquote>\n<h3>二、32 <em>bits</em>（保护模式）</h3>\n<p>32 <em>bits</em> 寄存器与 16 <em>bits</em> 寄存器一样，同样可以分为数据寄存器、变址寄存器、指针寄存器、控制寄存器，我们不再一一分类，将其归纳如下所示。</p>\n<ul>\n<li><strong>通用寄存器</strong></li>\n</ul>\n<table>\n<thead>\n<tr>\n<th align=\"center\">寄存器</th>\n<th align=\"center\">用途</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">EAX</td>\n<td align=\"center\">累加寄存器，通常作为用来执行加法</td>\n</tr>\n<tr>\n<td align=\"center\">EBX</td>\n<td align=\"center\">基地址寄存器，通常用于数据存取</td>\n</tr>\n<tr>\n<td align=\"center\">ECX</td>\n<td align=\"center\">计数器寄存器，通常用作计数器</td>\n</tr>\n<tr>\n<td align=\"center\">EDX</td>\n<td align=\"center\">数据寄存器，通常用来存储临时数据</td>\n</tr>\n<tr>\n<td align=\"center\">ESP</td>\n<td align=\"center\">栈顶指针，指向栈的顶部</td>\n</tr>\n<tr>\n<td align=\"center\">EBP</td>\n<td align=\"center\">栈底指针，指向栈的底部，通常用<code class=\"language-text\">ebp+偏移量</code>的形式来定位函数存放在栈中的局部变量</td>\n</tr>\n<tr>\n<td align=\"center\">ESI</td>\n<td align=\"center\">源地址寄存器，通常作为串操作中的源地址</td>\n</tr>\n<tr>\n<td align=\"center\">EDI</td>\n<td align=\"center\">目的地址寄存器，通常作为串操作中的目的地址</td>\n</tr>\n<tr>\n<td align=\"center\">EIP</td>\n<td align=\"center\">指令指针寄存器<br>通常与代码段寄存器CS组合为CS:IP作为代码段地址，指向下一条要执行的指令地址</td>\n</tr>\n<tr>\n<td align=\"center\">EFLAGS</td>\n<td align=\"center\">标志寄存器，记录CPU执行过程中的一系列状态，如下图所示</td>\n</tr>\n</tbody>\n</table>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/5c7b46abfe00e62558b8d2e534572277/c1c45/1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACBUlEQVR42lWQW08aURSF/fl96FObtBrbNK0pgg4XLRjQSuqdCMwwg1ekyHWcGcC5wDCtaL+enhiTPnxn7b323uvhLKxpUxR9hmJEkvXajFgtIK5PiBkBMTUkVp0Kb0q8ErGmRiTUGfHqjFRtIghIC9a1CXrbZWGxOOBrvsJKQRfU+PJdJ/PphNXPB+SWyuQ282zlC+ysHZIuZUkUi8R3t1EOiyyfTvigwsfqHxarUOlGLCT2bsikFJTUBoqSIp3LUnqTZuftKvqrLJqyiJF7z/nyCvul1+TzSxS231HcWyJRviN5AcmzJ+IG1PsicOtyzqbmkTx1SJWHZKr3JKsjMppLWndJqR7x4ztWjwekKx5ZI2RD88Wey1Y95FvNF3hs30DDEoGn7QcOrz1ypRa7ui1qX3LUCDhpTik1Q/bOR/yoD2Vfvv3FkZgfXLpS8+UuhUoXdQC9kQhs2L+pi89UGxb7apOzjsd5N5B60Qu4MkNqzSFa0xGeL71/+0ZrLHdO6h1xayNKHE8E2v4jbcundnnLxU9T1IHsW6Yr9aptYVx3pG/eRwzGs2cNMccRXXsid0chuIEIDOfghQ84bog/mwseRT+XBNGT9Fs9i4HjYg79F/rWGGsccNu3uWkPEKdMQhEYiMefhEidhs/MXvDE7N4LJGPX/w9nNKbT69M37zAtG8t2+Aulu3uJkUnwqQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"在这里插入图片描述\"\n        title=\"\"\n        src=\"/blog/static/5c7b46abfe00e62558b8d2e534572277/f058b/1.png\"\n        srcset=\"/blog/static/5c7b46abfe00e62558b8d2e534572277/c26ae/1.png 158w,\n/blog/static/5c7b46abfe00e62558b8d2e534572277/6bdcf/1.png 315w,\n/blog/static/5c7b46abfe00e62558b8d2e534572277/f058b/1.png 630w,\n/blog/static/5c7b46abfe00e62558b8d2e534572277/c1c45/1.png 824w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ul>\n<li><strong>控制寄存器</strong></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/blog/static/a9754d3709a140db3b8b1ede4bf0d055/c1c45/2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAACF0lEQVR42j2Re2/SUBiH+fTGxBiNybYPoNGNcSlQoJR7y+HSljuFjstQ57aM28YYLEaTx7Nq/ONJ3/c8v/NL2gbM0YJYd0V6uJZs/uJuSA3WPtro/v95vHVDsiOzfel7K8nGR20vifefcOZbAonuji+zPsUnk9y2RnpZJjzXCI5VgpMkmU2F3EOV3L5KtJchquhEkzofTyOcRZLEU1lOFY23hQ2ly98Eit6eYHNMumeR6reIOXUi9SqKVSMmUeSe6DioPYdEwyaet1Bydc5TBiFNkChYhDJVPjkHrO+yUEz3jEyV5+I7tqVjduVjnowTOR+xzn9gHn/DOPyKWfQ1i+x7Hs0jdhWZESfsJM/iiFnmmJC1on8rC90fB4QzwBYl7LrArlV8GlUTo1REmGUqRsnnZW8IU3qB5ecEjrxjlMrUZs/M17Lw62JPod6X30JHzRRISlQt78/pbBE1neNzMEJU1fzd9/9ISpeS2VA8hT1ecPcoC+/u97RdF0PUsNt9anaLutPGanYxqha6IUjny4iGQ8PpSN+m0exg1m2Ml2erK9/C5mp54OEgC9fbHYORQlpTyeg5QuEwSiyOrmdJ5fOcGSZKuUw2m5N/OCZ9BD2jE5Pu3B0SmUwRIYOb6zW7n78ILDcPXN1+Y3QxxruYMhiOcEeeP3sy7E5mDKczvPFEOs/3L7MnzweXc5reBW7P4/p2wWK15g+vf1vqx58DCAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"在这里插入图片描述\"\n        title=\"\"\n        src=\"/blog/static/a9754d3709a140db3b8b1ede4bf0d055/f058b/2.png\"\n        srcset=\"/blog/static/a9754d3709a140db3b8b1ede4bf0d055/c26ae/2.png 158w,\n/blog/static/a9754d3709a140db3b8b1ede4bf0d055/6bdcf/2.png 315w,\n/blog/static/a9754d3709a140db3b8b1ede4bf0d055/f058b/2.png 630w,\n/blog/static/a9754d3709a140db3b8b1ede4bf0d055/c1c45/2.png 824w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\r\n本文目前只更新了李治军老师【操作系统】课程中常用的寄存器，包括16位的和32位的，一些尚未使用到的还未更新，具体可以参考<code class=\"language-text\">《Linux内核完全注释(修正版v3.0).pdf》第四章</code>，这一章详细介绍了 80x86 系统寄存器大全。</p>","frontmatter":{"title":"【哈工大_操作系统】x86_64 常用寄存器大全","date":"August 11, 2024","description":"本文将介绍哈工大操作系统涉及到的x86_64 常用寄存器大全"}},"previous":{"fields":{"slug":"/019_HIT_OS_Bochs/"},"frontmatter":{"title":"【哈工大_操作系统】Bochs 汇编级调试方法及指令"}},"next":{"fields":{"slug":"/010_HIT_OS_Lab1/"},"frontmatter":{"title":"【哈工大_操作系统实验】Lab1 熟悉实验环境"}}},"pageContext":{"id":"17ebe75b-cc84-5780-93c4-94494f35c4fc","previousPostId":"6a0d6e81-d3f4-544c-ba69-9f649af7dd5a","nextPostId":"c9440984-c8ea-5088-8297-a4fec02e41b7"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}